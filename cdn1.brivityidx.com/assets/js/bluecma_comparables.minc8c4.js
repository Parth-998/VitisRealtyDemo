function loadScript(e,a){var t=document.createElement("script");t.type="text/javascript",t.readyState?t.onreadystatechange=function(){"loaded"!=t.readyState&&"complete"!=t.readyState||(t.onreadystatechange=null,a())}:t.onload=function(){a()},t.src=e,document.getElementsByTagName("head")[0].appendChild(t)}function loadCss(e,a){var t=document.createElement("link");t.type="text/css",t.readyState?t.onreadystatechange=function(){"loaded"!=t.readyState&&"complete"!=t.readyState||(t.onreadystatechange=null,a())}:t.onload=function(){a()},t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}function addEvent(e,a,t){e.addEventListener?e.addEventListener(a,t,!1):e.attachEvent("on"+a,(function(){return t.call(e,window.event)}))}var logs=[],eventSet=!1,loaded=!1,search_address_data=[];function log(e){function a(e){var a=document.getElementById("log"),t=document.createElement("div");t.appendChild(document.createTextNode(e)),a.appendChild(t)}loaded?a(e):logs.push(e),eventSet||(eventSet=!0,addEvent(window,"load",(function(){loaded=!0;for(var e=0;e<logs.length;e++)a(logs[e]);logs=[]})))}function initAutocomplete(e,a){$(e).on("change",(function(){$("#zipcode").val(""),$("#street").val("")})),$(e).geocomplete({country:["US","MX","CA"],types:["geocode"]}).bind("geocode:result",(function(t,o){if(a){$("#address_auto").val($(e).val()),$("#CmaLatitude").val(o.geometry.location.lat()),$("#CmaLongitude").val(o.geometry.location.lng()),$("#search_area").val(1.5);var s=o.formatted_address.split(", ");for(let e=0;e<s.length;e++)s[e]=s[e].replaceAll(" ","-");$("#address").val(s.join("-"));let a="";for(let e=0;e<o.address_components.length;e++)if("street_number"===o.address_components[e].types[0])$("#street").val(o.address_components[e].long_name);else if("administrative_area_level_1"===o.address_components[e].types[0])$("#state").val(o.address_components[e].short_name);else if("administrative_area_level_2"===o.address_components[e].types[0])$("#county").val(o.address_components[e].short_name);else if("postal_code"===o.address_components[e].types[0])$("#zipcode").val(o.address_components[e].short_name);else if("locality"===o.address_components[e].types[0]||("administrative_area_level_3"===o.address_components[e].types[0]||"sublocality_level_1"===o.address_components[e].types[0])&&""==$("#city").val()){var r=o.address_components[e].short_name;$("#city").val(r.split(" ").join("-"))}else"neighborhood"===o.address_components[e].types[0]&&(a=o.address_components[e].short_name);""!==a&&""==$("#city").val()&&$("#city").val(a),search_address_data=o.address_components}}))}function setPartialLead(e){var a,t,o,s,r="";e&&e.length&&e.forEach((function(e){var n=e.types?e.types[0]:null;if(n)switch(n){case"street_number":case"route":r+=(r?" ":"")+e.long_name;break;case"locality":a=e.long_name;break;case"administrative_area_level_1":s=e.short_name;break;case"administrative_area_level_2":t=e.long_name;break;case"postal_code":o=e.long_name}})),r&&a&&o&&$("#huser_id").val()?$.ajax({url:"/pages/is_logged.php",method:"POST",dataType:"json",data:{user_info:"yes"}}).done((function(e){e.logged&&e.lead_data&&$.ajax({url:"/pages/home_value_partial_lead.php",method:"POST",dataType:"json",data:{user_email:e.lead_data.email||"",user_f_name:e.lead_data.first_name||"",user_l_name:e.lead_data.last_name||"",user_phone:e.lead_data.phone||"",street_address:r,city:a,county:t,zipcode:o,state:s,form_source_url:window.location.href}}).done((function(e){}))})):$.ajax({url:"/pages/partial_lead.php",method:"POST",dataType:"json",data:{street_address:r,city:a,county:t,zipcode:o,state:s,lead_type:"seller",tags:"home value",form_source_url:window.location.href}}).done((function(e){}))}function initValidationForm(){$("#subjectHomeForm").bootstrapValidator({container:"tooltip",fields:{year:{validators:{digits:{message:"The year can contain digits only"},notEmpty:{message:"The year is required"}}},sq_feet:{validators:{digits:{message:"The SQFT can contain digits only"},notEmpty:{message:"The SQFT is required"}}},beds:{validators:{digits:{message:"The beds can contain digits only"},notEmpty:{message:"The beds is required"}}},bath_full:{validators:{digits:{message:"The baths can contain digits only"},notEmpty:{message:"The baths is required"}}},garage_cap:{validators:{digits:{message:"The garage can contain digits only"},notEmpty:{message:"The garage is required"}}},acreage:{validators:{notEmpty:{message:"The acreage is required"}}}}})}function compareWithMyHome(e){e.preventDefault();var a={},t="/",o=[!1,!0,!0,!1,!1,!1,!1,!1,!1];""!=$("#state").val()&&null!=$("#state").val()&&(state=$("#state").val().toUpperCase(),t+=state+"/",o[0]=!0),""!=$("#city").val()&&null!=$("#city").val()&&(city=$("#city").val().toLowerCase(),t+=city+"/",o[1]=!0),t+=""!=$("#zipcode").val()&&null!=$("#zipcode").val()?$("#zipcode").val()+"/":"",""!=$("#address").val()&&null!=$("#address").val()&&""!=$("#city").val()&&(address=$("#address").val().toLowerCase(),t+=address,o[2]=!0),""!=$("#property_type").val()&&null!=$("#property_type").val()&&(propertyType=$("#property_type").val(),t+="#propertyType="+propertyType,a.propertyType=propertyType),""!=$("#search_area").val()&&null!=$("#search_area").val()&&(searchArea=$("#search_area").val(),t+="&distance="+searchArea,a.searchArea=searchArea),t+="&size=500",($("#year").val()>0||""!=$("#year").val()&&null!=$("#year").val())&&(year=$("#year").val(),t+="&year="+year,o[3]=!0,a.year=year),($("#acreage").val()>0||""!=$("#acreage").val()&&null!=$("#acreage").val())&&(acreage=$("#acreage").val(),acreage.toString(),0==acreage.indexOf(".")&&(acreage="0"+acreage),t+="&acreage="+acreage,o[4]=!0,a.acreage=acreage),($("#sq_feet").val()>0||""!=$("#sq_feet").val()&&null!=$("#sq_feet").val())&&(sqfeet=$("#sq_feet").val(),t+="&sqfeet="+sqfeet,o[5]=!0,a.squareFeet=sqfeet),($("#beds").val()>0||""!=$("#beds").val()&&null!=$("#beds").val())&&(beds=$("#beds").val(),t+="&beds="+beds,o[6]=!0,a.bed=beds),($("#bath_full").val()>0||""!=$("#bath_full").val()&&null!=$("#bath_full").val())&&(bathrooms=$("#bath_full").val(),t+="&bathrooms="+bathrooms,o[7]=!0,a.bath=bathrooms),($("#garage_cap").val()>0||""!=$("#garage_cap").val()&&null!=$("#garage_cap").val())&&(garage=$("#garage_cap").val(),t+="&garage="+garage,o[8]=!0,a.garage=garage),t+="&lat="+$("#CmaLatitude").val()+"&lng="+$("#CmaLongitude").val();var s=$("#subjectHomeForm").data("bootstrapValidator");if(s.validate(),-1===o.indexOf(!1)&&s.isValid()){$("#submit_homeform").text("Finding..."),a.address=$("#address_auto").val(),a.searchLink=window.location.origin+"/homes-for-sale/comparables"+t;var r="/homes-for-sale/comparables"+t;$("#huser_id").val()?homeValueNotification(a,r):(createCookie("homeValueNotificationData",JSON.stringify(a),1),window.location.href=r),$("modal_subject_home").modal("hide")}else $("#submit_homeform").removeAttr("disabled"),$("#submit_homeform").text("Find out home value")}function homeValueNotification(e,a){$.ajax({url:"/pages/is_logged.php",method:"POST",dataType:"json",data:{user_info:"yes"}}).done((function(t){t.logged?t.lead_data?"undefined"!=typeof grecaptcha&&grecaptcha.ready((function(){grecaptcha.execute("6LfNOsoUAAAAAKTst6hjCdK0tmeiA4GVzqBjwScC",{action:"share_home_with_agent"}).then((function(o){var s={user_id:t.user_id,user_email:t.lead_data.email||"",user_name:t.lead_data.first_name+" "+t.lead_data.last_name,user_phone:t.lead_data.phone||"",user_brivity_uuid:t.lead_data.brivity_uuid,address:e.address,county:e.county||"",property_type:e.propertyType,search_area:e.searchArea||"",year:e.year||"",acreage:e.acreage,square_feet:e.squareFeet||0,bed:e.bed||0,bath:e.bath||0,garage:e.garage,subject:e.subject,search_link:e.searchLink,home_value:!0,recaptchaToken:o};$.ajax({url:"/pages/home_value_notification.php",method:"POST",dataType:"json",data:s}).done((function(){insertUserActivity&&insertUserActivity("valuation_inquiry",null,s),a&&(window.location.href=a)}))}))})):alert("User data could not be retrieved, please try again"):(alert("You need to be logged in to send this request."),$("modal_subject_home").modal("hide"),setTimeout((function(){$("#sign-up-modal").modal("show"),$("#sign-up-modal").attr("callback-modal","modal_subject_home")}),500))}))}!function(e,a){e=e||"docReady",a=a||window;var t=[],o=!1,s=!1;function r(){if(!o){o=!0;for(var e=0;e<t.length;e++)t[e].fn.call(window,t[e].ctx);t=[]}}function n(){"complete"===document.readyState&&r()}a[e]=function(e,a){o?setTimeout((function(){e(a)}),1):(t.push({fn:e,ctx:a}),"complete"===document.readyState?setTimeout(r,1):s||(document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):(document.attachEvent("onreadystatechange",n),window.attachEvent("onload",r)),s=!0))}}("docReady",window),docReady((function(){loadCss("https://code.jquery.com/ui/jquery-ui-git.css",null),loadCss("https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css",null),loadCss("https://cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.3/css/bootstrapValidator.min.css",null),loadScript("https://cdn1.brivityidx.com/assets/js/jquery.geocomplete.min.js",(function(){loadScript("https://cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.3/js/bootstrapValidator.min.js",(function(){$((function(){initAutocomplete("#search_address",!0),initAutocomplete("#hero_3_search_address",!0),initAutocomplete("#hero_2_search_address",!0),initAutocomplete("#hero_2_selling_second",!0),initAutocomplete("#hero_3_selling_second",!0),initAutocomplete("#home_value_1_search_address",!0),initAutocomplete("#home_value_2_search_address",!0),initAutocomplete("#search_address_modal",!0),initValidationForm(),$("#submit_homeform").on("click",compareWithMyHome)}))}))})),$("#reportButton").on("click",(function(){$(".hv_search_address_container").hide(),$("#search_address").val().trim()&&$("#street").val().trim()?($("#modal_subject_home").modal("show"),$("#search_address").trigger("geocode"),setTimeout((function(){setPartialLead(search_address_data),createCookie("searchAddressCache",JSON.stringify(search_address_data),90),search_address_data=[]}),1e3)):alert("Please enter a valid home address")}))}));